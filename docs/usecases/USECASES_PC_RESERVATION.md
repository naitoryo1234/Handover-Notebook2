# PC版 予約管理ユースケース (Reservation Notebook)

## 概要
PC（デスクトップ/ラップトップ）を使用し、受付スタッフや施術者が予約状況の確認、新規登録、変更、および顧客対応を行うためのユースケースを定義する。
画面サイズが広く、マウス/キーボード操作が可能であることを前提とする。

## アクター
- **受付スタッフ**: 電話対応、来店対応、会計、予約調整を行う。スピードと正確性が求められる。
- **施術者**: 自分のスケジュールの確認、担当患者のカルテ確認を行う。

## 主要ユースケース

### 1. 本日の予約状況の俯瞰 (Daily Overview)
- **目的**: 今日１日の流れを把握し、準備不足やダブルブッキングがないか確認する。
- **トリガー**: 業務開始時、ページを開いた時。
- **アクション**:
    - 「今日」の予約リストを表示する。
    - 時間順に並んだ予約を確認する。
    - 「担当未定」や「申し送り事項」がある予約を一目で発見する（バッジ/アラート）。

### 2. 特定の日付の確認 (Date Navigation)
- **目的**: 翌日の準備や、電話で指定された日付の空き状況を確認する。
- **アクション**:
    - カレンダー（サイドバー）から特定の日付をクリックする。
    - 「明日」ボタンで素早く翌日に移動する。
    - 日付ナビゲーション（< >）で前後日に移動する。
- **期待する挙動**:
    - リストが指定日の内容に切り替わる。
    - 「現在表示している日付」がカレンダー上でもハイライトされる。
    - **重要**: 「全期間」などのフィルターがかかっていた場合、日付指定アクションによってそれは解除され、指定日の「単日表示」になるべき。

### 3. 特定顧客の予約履歴・未来予約の検索 (Customer History Search)
- **目的**: 電話がかかってきた際、「〇〇さんの次の予約いつだっけ？」や「過去いつ来たっけ？」に対応する。
- **アクション**:
    - 検索ボックスに名前を入力する。
    - **「全期間」ボタンを押して、過去・未来のすべての予約を表示する。**
- **期待する挙動**:
    - 日付フィルターが解除され、全期間のデータが対象になる。
    - 検索解除後も「全期間」モードを維持するか、「今日」に戻るかはUX上の選択点（通常は検索終了＝業務終了なら今日に戻すのが親切だが、続けて別の人を探すなら全期間維持）。

### 4. 新規予約の登録 (New Reservation)
- **目的**: 電話や対面で新たな予約を受け付ける。
- **アクション**:
    - 「新規予約」ボタンを押す。
    - モーダルで顧客検索 -> 日時選択 -> メニュー選択 -> 保存。
- **コンテキスト**:
    - カレンダーを見ながら空いている時間を探してから登録する場合が多い。

### 5. 期間表示とカレンダーの整合性 (Consistency Check)
- **課題**: 「全期間」モード中に日付を選んだ場合など、モードの競合が発生しやすい。
- **解決策**:
    - **排他制御**: 「単日表示モード（Today/Specific Date）」と「範囲表示モード（Week/All）」は排他的であるべき。
    - **カレンダーの役割**: カレンダーは「単日表示モード」への切り替えトリガーとして機能する。
    - **UI表現**: 「全期間」表示中は、カレンダーの特定日選択状態（ハイライト）を解除、あるいは「今日」のみ薄く表示し、選択状態ではないことを示す。

## UI要件 (To-Be)
1.  **Toolbar State**: `DateRange` という内部状態ではなく、`ViewMode` = `Day` | `Week` | `All` というモード管理にする。
2.  **Interaction**:
    - Calendar Click -> `ViewMode` becomes `Day`, `Date` becomes `SelectedDate`.
    - 'Today' Click -> `ViewMode` becomes `Day`, `Date` becomes `Today`.
    - 'Tomorrow' Click -> `ViewMode` becomes `Day`, `Date` becomes `Tomorrow`.
    - 'All' Click -> `ViewMode` becomes `All`.
3.  **Visual Feedback**:
    - `All` モード時はカレンダーの選択ハイライトを消す。
    - `All` モード時は日付ナビゲーションを無効化する。
