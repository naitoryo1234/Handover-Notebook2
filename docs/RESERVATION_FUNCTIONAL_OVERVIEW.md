# 予約管理台帳 (Reservation Notebook) 機能概要書

本ドキュメントでは、クリニック向け予約管理システムにおける「予約管理台帳」の主な機能と操作フローについて解説します。
開発時の参考および機能仕様の把握にご利用ください。

## 1. 画面構成と主要機能

### 1-1. 予約一覧ダッシュボード (Appointment Dashboard)
日々の予約状況を俯瞰するためのメイン画面です。

*   **タイムライン表示**:
    *   当日の予約を時系列で一覧表示します。
    *   **PC版**: 詳細なテーブル形式で、ステータス、患者名、担当スタッフ、メモを一目で確認可能。
    *   **モバイル版**: カード形式で最適化し、重要な情報（時間、患者名、ステータス）をコンパクトに表示。
*   **アラート機能**:
    *   **未割り当てアラート**: 担当スタッフが決まっていない予約を黄色のアラートで強調表示します。
    *   **申し送りアラート**: 受付スタッフからの重要な申し送り事項（管理者メモ）がある場合、赤色のアラートで注意を喚起します。
*   **フィルタリング**:
    *   日付切り替え（今日、明日、カレンダー指定）
    *   スタッフごとの絞り込み
    *   患者名検索

### 1-2. 新規予約作成
*   **クイック追加**: ダッシュボード上部の[新規予約]ボタンから、スムーズに予約登録が可能。
*   **重複チェック**: 同じ患者の重複予約や、スタッフの空き状況をシステムが自動チェックし、ダブルブッキングを防止します。

## 2. インタラクションと画面遷移

### 2-1. 患者詳細情報の閲覧フロー
予約一覧から、スムーズにその患者の詳細情報へアクセスできます。

1.  **アクション**: 予約カード（またはテーブル行）内の「患者名」をクリック。
2.  **遷移先**: **患者詳細ページ (Patient Detail)** へ遷移します。
3.  **閲覧可能な情報**:
    *   **基本情報**: 氏名、連絡先、特記事項（ラポールメモ）。
    *   **次回予約**: 次に入っている予約情報（もしあれば）。
    *   **カルテ履歴**: 過去の施術記録（カルテ）の一覧へのリンクおよび最新の記録。
    *   **新規カルテ作成**: そのままスムーズに本日のカルテ入力を開始できます。

> **Point**: 「予約」から「カルテ」へ、シームレスに業務を移行できる動線設計になっています。

### 2-2. 予約情報の編集（モーダル操作）
画面遷移することなく、その場で素早く情報を更新できます。

*   **編集・詳細確認**: 
    *   [編集]ボタンをクリックすると、ダイアログ（モーダル）が開きます。
    *   日時変更、メモの追記、担当スタッフの変更が可能です。
*   **ステータス変更**:
    *   **チェックイン**: 来院時に即座にステータスを変更。
    *   **キャンセル**: 削除アイコンから、確認ダイアログを経てキャンセル処理が可能（論理削除）。
*   **メモの確認・解決**:
    *   長いメモはクリック要不要で展開表示。
    *   申し送り事項は、確認後にチェックを入れることで「解決済み」ステータスに変更可能。

## 3. モバイル最適化 (Mobile Experience)
タブレットやスマートフォンでの利用を前提とした設計です。

*   **カードUI**: 小さな画面でもタップしやすいカード型のレイアウト。
*   **電話発信**: 電話番号タップで即座に発信可能（端末機能連携）。
*   **フロート制御**: 重要なアクションボタンは親指の届く範囲や、視認性の高い位置に配置。

---

## 補足: システム連携イメージ
この予約台帳は、顧客情報マスタ（Patient）と密接に連携しています。
予約データは単独で存在するのではなく、常に「どの患者の」予約であるかが紐付けられており、これにより予約履歴とカルテ履歴の一元管理を実現しています。
