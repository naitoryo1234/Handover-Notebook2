# アイデア・将来の拡張候補

採用しなかったが将来的に有用なアイデア、または優先度の都合で保留にした機能を記録します。

---

## 🔴 重要: 業態プリセット対応

**記録日**: 2025-12-19  
**ステータス**: 保留（Phase 2以降で対応予定）

### 概要
アプリ内のUI文字列を変数化し、業態ごとのプリセット（鍼灸院、サロン、塾など）を適用できるようにする。

### 現状
- `src/config/labels.ts` に **プリセット基盤は存在する**（GENERIC / CLINIC / SALON）
- ただし、**Customer Notebook / Reservation V2 では未使用**（全てハードコード）
- 旧システム（分離前）では一部使用されていた

### 必要な作業
1. **UI文字列の置換**: 「顧客」「予約」等のハードコード文字列を `LABELS` / `TERMS` 参照に変更
2. **プリセット切り替え機構**: 環境変数 or DB設定での切り替え
3. **AIプロンプトの業態別テンプレート化**: Gemini整形・意図解析のプロンプトを業態別に

### 見積もり工数
- UI文字列置換: 0.5〜1日
- 切り替え機構: 0.25日
- AIプロンプト: 0.5日
- **合計: 1〜2日程度**

### なぜ今やらないのか
- キラー機能（音声入力）の磨き込みが優先
- 現時点では汎用版（GENERIC）で問題ない
- β版リリース前に対応すれば間に合う

### 参照
- `src/config/labels.ts` - プリセット定義
- `prisma/schema.prisma` - `tags`, `attributes` (JSON fields)
- `docs/design/PRODUCT_STRATEGY.md` - 「汎用コア + 業態プリセット」戦略

---

## 🔴 重要: 音声入力 + AI整形の設計見直し

**記録日**: 2025-12-19  
**ステータス**: PRD作成が必要（Phase 2検討）

### 概要
Customer Notebookの音声入力 → AI整形機能を汎用化・拡張するためには、設計から見直す必要がある。

### 現状の実装
- `CustomerDetailClient.tsx` に完全なフローが実装済み
  - Groq Whisper 文字起こし → Gemini AI整形 → ダイアログ確認 → 保存
- **問題**: AIプロンプトが「整骨院・鍼灸院」向けにハードコード (`geminiActions.ts`)

### 核心的な課題
```
プロンプト ←→ 入力フォーム は表裏一体

├─ SOAPフォームを使う → プロンプトもSOAP抽出に対応
├─ シンプルメモ → プロンプトもシンプルに
└─ 業態プリセット = プロンプト + フォーム + ラベル のセット
```

**片方だけ変えても意味がない。セットで設計する必要がある。**

### PRD作成時に検討すべき項目
1. **テンプレート選択機能**: ユーザーが記録形式を選べるようにする
   - シンプルメモ / SOAP / 施術記録 / カスタム
2. **AIプロンプトの動的生成**: 選択されたテンプレートに応じてプロンプトを変える
3. **抽出項目のカスタマイズ**: 業態によって必要な情報が異なる
4. **設定画面**: ユーザーが自分の業態に合った設定を選べるUI

### 暫定方針
- 鍼灸院向けデモでは現状のまま使用（問題なし）
- 汎用化は Phase 2 以降でPRDを作成してから着手

### 参照
- `src/actions/geminiActions.ts` - 現在のAI整形プロンプト
- `src/app/customers/[id]/CustomerDetailClient.tsx` - 音声入力フロー

---

## 💡 その他のアイデア

（今後追加）

